============================= test session starts ==============================
platform darwin -- Python 3.14.2, pytest-9.0.2, pluggy-1.6.0 -- /Users/wallonwalusayi/claude-multi-terminal/venv/bin/python3
cachedir: .pytest_cache
rootdir: /Users/wallonwalusayi/claude-multi-terminal
configfile: pyproject.toml
plugins: anyio-4.12.1, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 63 items

tests/test_phase4_streaming.py::TestStreamState::test_state_values PASSED [  1%]
tests/test_phase4_streaming.py::TestStreamState::test_state_comparison PASSED [  3%]
tests/test_phase4_streaming.py::TestStreamState::test_state_count PASSED [  4%]
tests/test_phase4_streaming.py::TestStreamingSession::test_session_creation PASSED [  6%]
tests/test_phase4_streaming.py::TestStreamingSession::test_session_duration_active PASSED [  7%]
tests/test_phase4_streaming.py::TestStreamingSession::test_session_duration_complete PASSED [  9%]
tests/test_phase4_streaming.py::TestStreamingSession::test_is_active_states PASSED [ 11%]
tests/test_phase4_streaming.py::TestStreamingSession::test_buffer_initialization PASSED [ 12%]
tests/test_phase4_streaming.py::TestStreamingSession::test_token_count_tracking PASSED [ 14%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_monitor_initialization PASSED [ 15%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_start_stream_default PASSED [ 17%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_start_stream_thinking PASSED [ 19%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_start_stream_custom_id PASSED [ 20%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_update_stream_tokens PASSED [ 22%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_update_stream_multiple_times PASSED [ 23%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_update_stream_with_content PASSED [ 25%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_update_stream_buffer_limit PASSED [ 26%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_update_nonexistent_stream PASSED [ 28%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_update_transitions_thinking_to_streaming PASSED [ 30%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_end_stream_success PASSED [ 31%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_end_stream_error PASSED [ 33%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_end_nonexistent_stream PASSED [ 34%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_multiple_concurrent_streams PASSED [ 36%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_get_active_streams PASSED [ 38%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_calculate_speed PASSED [ 39%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_remove_stream PASSED [ 41%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_remove_nonexistent_stream PASSED [ 42%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_clear_completed PASSED [ 44%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_get_spinner_frame PASSED [ 46%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_spinner_animation PASSED [ 47%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_format_stream_indicator_thinking PASSED [ 49%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_format_stream_indicator_streaming PASSED [ 50%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_format_stream_indicator_complete PASSED [ 52%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_format_stream_indicator_error PASSED [ 53%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_format_nonexistent_stream PASSED [ 55%]
tests/test_phase4_streaming.py::TestStreamMonitor::test_get_stats PASSED [ 57%]
tests/test_phase4_streaming.py::TestHelperFunctions::test_get_spinner_frame_function PASSED [ 58%]
tests/test_phase4_streaming.py::TestHelperFunctions::test_get_spinner_frame_wraps PASSED [ 60%]
tests/test_phase4_streaming.py::TestHelperFunctions::test_get_state_color PASSED [ 61%]
tests/test_phase4_streaming.py::TestTokenUsage::test_usage_creation PASSED [ 63%]
tests/test_phase4_streaming.py::TestTokenUsage::test_total_tokens PASSED [ 65%]
tests/test_phase4_streaming.py::TestTokenUsage::test_calculate_cost_opus PASSED [ 66%]
tests/test_phase4_streaming.py::TestTokenUsage::test_calculate_cost_sonnet PASSED [ 68%]
tests/test_phase4_streaming.py::TestTokenUsage::test_calculate_cost_haiku PASSED [ 69%]
tests/test_phase4_streaming.py::TestTokenUsage::test_calculate_cost_with_cached PASSED [ 71%]
tests/test_phase4_streaming.py::TestTokenTracker::test_tracker_initialization PASSED [ 73%]
tests/test_phase4_streaming.py::TestTokenTracker::test_track_single_request PASSED [ 74%]
tests/test_phase4_streaming.py::TestTokenTracker::test_track_multiple_requests_same_session PASSED [ 76%]
tests/test_phase4_streaming.py::TestTokenTracker::test_track_multiple_sessions PASSED [ 77%]
tests/test_phase4_streaming.py::TestTokenTracker::test_global_usage_aggregation PASSED [ 79%]
tests/test_phase4_streaming.py::TestTokenTracker::test_total_cost_calculation PASSED [ 80%]
tests/test_phase4_streaming.py::TestTokenTracker::test_cached_tokens_tracking PASSED [ 82%]
tests/test_phase4_streaming.py::TestTokenTracker::test_reset_session PASSED [ 84%]
tests/test_phase4_streaming.py::TestTokenTracker::test_reset_nonexistent_session PASSED [ 85%]
tests/test_phase4_streaming.py::TestTokenTracker::test_export_usage_report PASSED [ 87%]
tests/test_phase4_streaming.py::TestStreamingIntegration::test_stream_with_token_tracking PASSED [ 88%]
tests/test_phase4_streaming.py::TestStreamingIntegration::test_concurrent_stream_tracking PASSED [ 90%]
tests/test_phase4_streaming.py::TestStreamingIntegration::test_token_usage_during_streaming PASSED [ 92%]
tests/test_phase4_streaming.py::TestStreamingIntegration::test_session_lifecycle_with_streaming PASSED [ 93%]
tests/test_phase4_streaming.py::TestStreamingIntegration::test_error_handling_integration PASSED [ 95%]
tests/test_phase4_streaming.py::TestStreamingIntegration::test_speed_calculation_accuracy PASSED [ 96%]
tests/test_phase4_streaming.py::TestStreamingIntegration::test_buffer_content_tracking PASSED [ 98%]
tests/test_phase4_streaming.py::TestStreamingIntegration::test_performance_100_stream_updates PASSED [100%]

============================== 63 passed in 0.84s ==============================
